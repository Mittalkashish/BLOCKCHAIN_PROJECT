<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Decentralized Identity Management</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
    <link rel="stylesheet" type="text/css" href="index.css" />

    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
      integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <div
      class="w3-container w3-text-white w3-center"
      style="background-color: #212d74"
    >
      <h4>Decentralized Application for Identity Management</h4>
    </div>
    <center><p id="logstatus" class="w3-center w3-tag w3-white"></p></center>
    <button
      type="button"
      id="logoutBtn"
      class="w3-button w3-red w3-hover-black w3-right w3-small"
    >
      Logout <i class="fas fa-sign-out-alt"></i></button
    ><br />
    <div class="w3-right w3-panel w3-round w3-green">
      <p class="w3-text-white">
        Total People registered: <b id="users_total_count"></b>
      </p>
      <p class="w3-text-white">
        Total Government Orgs registered: <b id="govtorgs_total_count"></b>
      </p>
    </div>
    <br /><br /><br />
    <div>
      <div class="w3-cell-row w3-padding">
        <div class="w3-container w3-red w3-cell w3-padding-64 w3-round">
          <div id="userlogin">
            <label>User Email</label>
            <input
              type="email"
              id="userid"
              class="w3-input w3-border"
              placeholder="Enter your email"
            />
            <label>Password</label>
            <input
              type="password"
              id="userpswrd"
              class="w3-input w3-border"
              placeholder="Enter your password"
            /><br />
            <center>
              <button
                type="submit"
                id="userSignIn"
                class="w3-button w3-indigo w3-hover-purple"
              >
                User Login</button
              ><br /><br />
              <button
                id="registerUser"
                class="w3-button w3-green w3-hover-teal"
              >
                Register User</button
              ><br /><br />
              <a href="userHomePage.html">
                <button
                  id="enterUserPage"
                  class="w3-button w3-blue"
                  style="display: none"
                >
                  ENTER</button
                ><br />
              </a>
              Not registered to DAppId?
              <a href="userregistration.html">Register here</a>
            </center>
          </div>
        </div>
        <div class="w3-container w3-yellow w3-cell w3-padding-64 w3-round">
          <div id="govtlogin">
            <label>Organization Email</label>
            <input
              type="email"
              id="govtid"
              class="w3-input w3-border"
              placeholder="Enter organization email"
            />
            <label>Password</label>
            <input
              type="password"
              id="govtpswrd"
              class="w3-input w3-border"
              placeholder="Enter your password"
            /><br />
            <center>
              <button
                type="submit"
                id="govtsubmit"
                class="w3-button w3-indigo w3-hover-purple"
              >
                Govt Org Login</button
              ><br /><br />
              <a href="govtHomePage.html">
                <button
                  id="enterGovtPage"
                  class="w3-button w3-blue"
                  style="display: none"
                >
                  ENTER</button
                ><br />
              </a>
              Not registered to DAppId?
              <a href="govtOrgRegistration.html">Register here</a>
            </center>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.36/dist/web3.min.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      crossorigin="anonymous"
    ></script>

    <script>
      var userContract, govtOrgContract;

      $(document).ready(async function () {
        if (typeof window.ethereum !== "undefined") {
          web3 = new Web3(window.ethereum);
          ethereum
            .request({ method: "eth_requestAccounts" })
            .then(function (accounts) {
              console.log("Connected Account:", accounts[0]);
            })
            .catch(function (error) {
              console.error("MetaMask connection error:", error);
            });
          const addressRes = await fetch("addresses.json");
          const addresses = await addressRes.json();
          console.log(addresses.User);
          console.log(addresses.Govtorg);

          // User Contract ABI and Address

          var userAbi = [
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "_docs_permitted",
              outputs: [
                {
                  internalType: "uint256",
                  name: "aadhaarproof",
                  type: "uint256",
                },
                {
                  internalType: "uint256",
                  name: "birthproof",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "_docs_permitted_tb",
              outputs: [
                {
                  internalType: "uint256",
                  name: "aadhaarproof",
                  type: "uint256",
                },
                {
                  internalType: "uint256",
                  name: "birthproof",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "_addGovtorgEmailid",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_addGovtorgPassword",
                  type: "string",
                },
              ],
              name: "addGovtLogin",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [],
              name: "d1",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "d2",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "doc1",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "doc2",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "docsRequestedDB",
              outputs: [
                {
                  internalType: "uint256",
                  name: "aadhaarproof",
                  type: "uint256",
                },
                {
                  internalType: "uint256",
                  name: "birthproof",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getGovorgContactnum",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getGovorgHq",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getGovorgIdNum",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getGovorgLocation",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getGovorgName",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getGovtOrgsCount",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "uint256",
                  name: "num",
                  type: "uint256",
                },
              ],
              name: "getOrgAt",
              outputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getd1",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getd2",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "gov",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "govorg_ContactNum",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "govorg_HQ",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "govorg_IdNum",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "govorg_Location",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "govorg_Name",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "govorg_UserRequestedCount",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              name: "govtOrgsList",
              outputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "govtorgDetails",
              outputs: [
                {
                  internalType: "string",
                  name: "govtOrgEmailId",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "govtOrgPassword",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "govtOrgName",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "govtOrgIdNum",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "govtOrgLocation",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "govtOrgHeadQuarters",
                  type: "string",
                },
                {
                  internalType: "uint256",
                  name: "govtOrgContactNum",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "govtorgLogin",
              outputs: [
                {
                  internalType: "string",
                  name: "usern",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "userp",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "govtorgLoginStatus",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "govtorgRegisterStatus",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              name: "govtorgRegisteredStatus",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "govtorgsCount",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "logout",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "matchAddrToEmail",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              name: "myDocuments",
              outputs: [
                {
                  internalType: "uint256",
                  name: "id",
                  type: "uint256",
                },
                {
                  internalType: "string",
                  name: "fileDocName",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "regUniqueNum",
                  type: "string",
                },
                {
                  internalType: "bool",
                  name: "initialVerification",
                  type: "bool",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "owner",
              outputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "_govtOrgEmailId",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_govtOrgPassword",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_govtOrgName",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_govtOrgIdNum",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_govtOrgLocation",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_govtOrgHeadQuarters",
                  type: "string",
                },
                {
                  internalType: "uint256",
                  name: "_govtOrgContactNum",
                  type: "uint256",
                },
              ],
              name: "registerGovtOrg",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "requestUser",
                  type: "address",
                },
                {
                  internalType: "uint256",
                  name: "a",
                  type: "uint256",
                },
                {
                  internalType: "uint256",
                  name: "b",
                  type: "uint256",
                },
              ],
              name: "requestDocsFromGovOrg",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [],
              name: "showGovtOrgDetails",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "_govorgname",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_govorgpassword",
                  type: "string",
                },
              ],
              name: "signinGovtorg",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [],
              name: "testStr",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "userDetails",
              outputs: [
                {
                  internalType: "string",
                  name: "userEmailId",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "userpassword",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "userFullName",
                  type: "string",
                },
                {
                  internalType: "uint256",
                  name: "age",
                  type: "uint256",
                },
                {
                  internalType: "string",
                  name: "dateOfBirth",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "userHouseAddress",
                  type: "string",
                },
                {
                  internalType: "uint256",
                  name: "mobileNumber",
                  type: "uint256",
                },
                {
                  internalType: "uint256",
                  name: "aadharNum",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "userLogin",
              outputs: [
                {
                  internalType: "string",
                  name: "usern",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "userp",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "userLoginStatus",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "userRegisterStatus",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              name: "userRegisteredStatus",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "user_AadhaarNum",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "user_Age",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "user_Dob",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "user_FullName",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "user_HouseAddr",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "user_MobileNum",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "usersCount",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "_userEmailId",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_userpassword",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_userFullName",
                  type: "string",
                },
                {
                  internalType: "uint256",
                  name: "_age",
                  type: "uint256",
                },
                {
                  internalType: "string",
                  name: "_dateOfBirth",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_userHouseAddr",
                  type: "string",
                },
                {
                  internalType: "uint256",
                  name: "_mobileNumber",
                  type: "uint256",
                },
                {
                  internalType: "uint256",
                  name: "_aadharNum",
                  type: "uint256",
                },
              ],
              name: "registerUser",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "_addUserName",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_addUserPassword",
                  type: "string",
                },
              ],
              name: "addUserLogin",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "_username",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_userpassword",
                  type: "string",
                },
              ],
              name: "signinUser",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [],
              name: "showUserDetails",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [],
              name: "showUserFullname",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "showUserAge",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "showUserDob",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "showUserHouseAddr",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "showUserMobileNum",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "showUserAadhaarNum",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "regNum",
                  type: "string",
                },
              ],
              name: "addAadhaarDoc",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "userAddress",
                  type: "address",
                },
              ],
              name: "getAadhaarDoc",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "regNum",
                  type: "string",
                },
              ],
              name: "addBirthCertDoc",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "userAddress",
                  type: "address",
                },
              ],
              name: "getBirthCertDoc",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [],
              name: "getTestStr",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getUsersCount",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "requester",
                  type: "address",
                },
              ],
              name: "getRequestedInfo",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "uint256",
                  name: "n",
                  type: "uint256",
                },
              ],
              name: "getOrgDetails",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "uint256",
                  name: "num",
                  type: "uint256",
                },
              ],
              name: "getOrgNameAt",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getDoc1",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getDoc2",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "req_address",
                  type: "address",
                },
                {
                  internalType: "uint256",
                  name: "z",
                  type: "uint256",
                },
              ],
              name: "setPermissionDoc1",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "req_address",
                  type: "address",
                },
                {
                  internalType: "uint256",
                  name: "z",
                  type: "uint256",
                },
              ],
              name: "setPermissionDoc2",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "req_address",
                  type: "address",
                },
              ],
              name: "getPermissionDoc1",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "req_address",
                  type: "address",
                },
              ],
              name: "getPermissionDoc2",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
          ]; // Replace with User contract ABI
          var userAddress = addresses.User; // Replace with deployed contract address
          userContract = new web3.eth.Contract(userAbi, userAddress);

          // GovtOrg Contract ABI and Address
          var govtOrgAbi = [
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "_docs_permitted",
              outputs: [
                {
                  internalType: "uint256",
                  name: "aadhaarproof",
                  type: "uint256",
                },
                {
                  internalType: "uint256",
                  name: "birthproof",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "_docs_permitted_tb",
              outputs: [
                {
                  internalType: "uint256",
                  name: "aadhaarproof",
                  type: "uint256",
                },
                {
                  internalType: "uint256",
                  name: "birthproof",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "d1",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "d2",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "docsRequestedDB",
              outputs: [
                {
                  internalType: "uint256",
                  name: "aadhaarproof",
                  type: "uint256",
                },
                {
                  internalType: "uint256",
                  name: "birthproof",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "uint256",
                  name: "num",
                  type: "uint256",
                },
              ],
              name: "getOrgAt",
              outputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "gov",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "govorg_ContactNum",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "govorg_HQ",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "govorg_IdNum",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "govorg_Location",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "govorg_Name",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "govorg_UserRequestedCount",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              name: "govtOrgsList",
              outputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "govtorgDetails",
              outputs: [
                {
                  internalType: "string",
                  name: "govtOrgEmailId",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "govtOrgPassword",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "govtOrgName",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "govtOrgIdNum",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "govtOrgLocation",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "govtOrgHeadQuarters",
                  type: "string",
                },
                {
                  internalType: "uint256",
                  name: "govtOrgContactNum",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "govtorgLogin",
              outputs: [
                {
                  internalType: "string",
                  name: "usern",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "userp",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "govtorgLoginStatus",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "govtorgRegisterStatus",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              name: "govtorgRegisteredStatus",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "govtorgsCount",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "logout",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "matchAddrToEmail",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              name: "myDocuments",
              outputs: [
                {
                  internalType: "uint256",
                  name: "id",
                  type: "uint256",
                },
                {
                  internalType: "string",
                  name: "fileDocName",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "regUniqueNum",
                  type: "string",
                },
                {
                  internalType: "bool",
                  name: "initialVerification",
                  type: "bool",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "owner",
              outputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "userDetails",
              outputs: [
                {
                  internalType: "string",
                  name: "userEmailId",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "userpassword",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "userFullName",
                  type: "string",
                },
                {
                  internalType: "uint256",
                  name: "age",
                  type: "uint256",
                },
                {
                  internalType: "string",
                  name: "dateOfBirth",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "userHouseAddress",
                  type: "string",
                },
                {
                  internalType: "uint256",
                  name: "mobileNumber",
                  type: "uint256",
                },
                {
                  internalType: "uint256",
                  name: "aadharNum",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "userLogin",
              outputs: [
                {
                  internalType: "string",
                  name: "usern",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "userp",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "userLoginStatus",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "",
                  type: "address",
                },
              ],
              name: "userRegisterStatus",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              name: "userRegisteredStatus",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "usersCount",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "_govtOrgEmailId",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_govtOrgPassword",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_govtOrgName",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_govtOrgIdNum",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_govtOrgLocation",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_govtOrgHeadQuarters",
                  type: "string",
                },
                {
                  internalType: "uint256",
                  name: "_govtOrgContactNum",
                  type: "uint256",
                },
              ],
              name: "registerGovtOrg",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "_addGovtorgEmailid",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_addGovtorgPassword",
                  type: "string",
                },
              ],
              name: "addGovtLogin",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "string",
                  name: "_govorgname",
                  type: "string",
                },
                {
                  internalType: "string",
                  name: "_govorgpassword",
                  type: "string",
                },
              ],
              name: "signinGovtorg",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [],
              name: "showGovtOrgDetails",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [],
              name: "getGovorgName",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getGovorgIdNum",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getGovorgLocation",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getGovorgHq",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getGovorgContactnum",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getGovtOrgsCount",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "requestUser",
                  type: "address",
                },
                {
                  internalType: "uint256",
                  name: "a",
                  type: "uint256",
                },
                {
                  internalType: "uint256",
                  name: "b",
                  type: "uint256",
                },
              ],
              name: "requestDocsFromGovOrg",
              outputs: [],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [],
              name: "getd1",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
            {
              inputs: [],
              name: "getd2",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
              constant: true,
            },
          ]; // Replace with GovtOrg contract ABI
          var govtOrgAddress = addresses.Govtorg; // Replace with deployed contract address
          govtOrgContract = new web3.eth.Contract(govtOrgAbi, govtOrgAddress);

          // Fetch counts
          userContract.methods
            .getUsersCount()
            .call()
            .then(function (userCount) {
              $("#users_total_count").html(userCount);
            })
            .catch(function (error) {
              console.error("Error fetching user count:", error);
            });

          govtOrgContract.methods
            .getGovtOrgsCount()
            .call()
            .then(function (orgCount) {
              $("#govtorgs_total_count").html(orgCount);
            })
            .catch(function (error) {
              console.error("Error fetching org count:", error);
            });
        } else {
          alert(
            "MetaMask is not installed. Please install MetaMask to use this DApp."
          );
          return;
        }

        // User Login
        $("#userSignIn").click(function () {
          var userEmail = $("#userid").val().trim();
          var userPassword = $("#userpswrd").val().trim();

          if (!userEmail || !userPassword) {
            alert("Please fill in both email and password.");
            return;
          }

          web3.eth
            .getAccounts()
            .then(function (accounts) {
              var userAccount = accounts[0];
              return userContract.methods
                .signinUser(userEmail, userPassword)
                .send({ from: userAccount });
            })
            .then(function (tx) {
              console.log("User Login Successful:", tx);
              alert("Login successful!");
              $("#enterUserPage").show();
            })
            .catch(function (error) {
              console.error("User Login Failed:", error);
              alert("Login failed. Check console for details.");
            });
        });

        // Register User
        $("#registerUser").click(function () {
          var userEmail = $("#userid").val().trim();
          var userPassword = $("#userpswrd").val().trim();

          if (!userEmail || !userPassword) {
            alert("Please fill in both email and password.");
            return;
          }

          web3.eth
            .getAccounts()
            .then(function (accounts) {
              var userAccount = accounts[0];
              return userContract.methods
                .registerUser(userEmail, userPassword)
                .send({ from: userAccount });
            })
            .then(function (tx) {
              console.log("User Registration Successful:", tx);
              alert("User Registered Successfully!");
            })
            .catch(function (error) {
              console.error("User Registration Failed:", error);
              alert("Registration failed. Check console for details.");
            });
        });

        // Govt Org Login
        $("#govtsubmit").click(function () {
          var govtEmail = $("#govtid").val().trim();
          var govtPassword = $("#govtpswrd").val().trim();

          if (!govtEmail || !govtPassword) {
            alert("Please fill in both email and password.");
            return;
          }

          web3.eth
            .getAccounts()
            .then(function (accounts) {
              var govtAccount = accounts[0];
              return govtOrgContract.methods
                .signinGovtorg(govtEmail, govtPassword)
                .send({ from: govtAccount });
            })
            .then(function (tx) {
              console.log("Govt Org Login Successful:", tx);
              alert("Login successful!");
              $("#enterGovtPage").show();
            })
            .catch(function (error) {
              console.error("Govt Org Login Failed:", error);
              alert("Login failed. Check console for details.");
            });
        });

        // Logout
        $("#logoutBtn").click(function () {
          web3.eth
            .getAccounts()
            .then(function (accounts) {
              var logoutAccount = accounts[0];
              return userContract.methods
                .logout()
                .send({ from: logoutAccount });
            })
            .then(function (tx) {
              console.log("Logout Successful:", tx);
              $("#logstatus").text("You are Logged out.");
              window.location.reload();
            })
            .catch(function (error) {
              console.error("Logout Failed:", error);
            });
        });
      });
    </script>
  </body>
</html>
